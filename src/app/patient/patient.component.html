<div class="app-patient">
  <div class="scroll-bar">
    <input
      type="text"
      class="dx-textbox search-box"
      placeholder="Search patient..."
      [(ngModel)]="searchText"
      (ngModelChange)="onSearchChange()"
    />

    <div class="dx-card-container scrollable-list">
      <div *ngFor="let patient of filteredPatientList" class="dx-card">
        <div class="dx-card-header">
          <div class="dx-card-avatar">
            <i class="dx-icon dx-icon-user"></i>
          </div>
          <div>
            <div class="dx-card-title">{{ patient.userName }}</div>
            <div class="dx-card-subtitle">{{ patient.email }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  
  <div class="main-content">
    <dx-data-grid
      [dataSource]="cases"
      keyExpr="caseId"
      [showBorders]="true"
      [columnAutoWidth]="true"
      [rowAlternationEnabled]="true"
      [width]="'100%'"
      [height]="600"
      (onEditorPreparing)="onEditorPreparing($event)"
      (onInitNewRow)="onInitNewRow($event)"
      (onRowInserted)="onRowInserted($event)"
      (onRowUpdated)="onRowUpdated($event)"
      (onRowRemoved)="onRowRemoved($event)"
    >
      <dxo-toolbar>
        <dxi-item location="after" name="addRowButton"></dxi-item>
      </dxo-toolbar>

      <dxo-filter-row [visible]="true"></dxo-filter-row>
      <dxo-header-filter [visible]="true"></dxo-header-filter>

      <dxi-column dataField="title" caption="Case Title"></dxi-column>
      <dxi-column dataField="therapistName" caption="Therapist Name"></dxi-column>
      <dxi-column dataField="address" caption="Address"></dxi-column>
      <dxi-column dataField="dateCreated" caption="Date" dataType="date"></dxi-column>

      <dxi-column type="buttons">
        <dxi-button name="edit" icon="edit"></dxi-button>
        <dxi-button name="delete" icon="trash"></dxi-button>
      </dxi-column>

      <dxo-editing mode="popup" [allowUpdating]="true" [allowAdding]="true" [allowDeleting]="true">
        <dxo-popup title="Case Info" [showTitle]="true" [width]="500" [height]="400"></dxo-popup>

        <dxo-form [colCount]="1">
       
          <dxi-item
            dataField="title"
            editorType="dxSelectBox"
            [editorOptions]="{
              items: titlesList,
              placeholder: 'Select Case Title',
              searchEnabled: true
            }"
          ></dxi-item>

         
          <dxi-item
            dataField="therapistName"
            editorType="dxSelectBox"
            [editorOptions]="{
              items: therapistsList,
              valueExpr: 'name',
              displayExpr: 'name',
              placeholder: 'Select Therapist',
              searchEnabled: true
            }"
          ></dxi-item>

         
          <dxi-item dataField="address"></dxi-item>

          
          <dxi-item
            dataField="dateCreated"
            editorType="dxDateBox"
            [editorOptions]="{
              type: 'date',
              displayFormat: 'yyyy-MM-dd'
            }"
          ></dxi-item>
        </dxo-form>
      </dxo-editing>
    </dx-data-grid>
  </div>
</div>
